install.packages("C:/Users/eugen/OneDrive/Documenti/GitHub/CausalArima",
repos = NULL,
type = "source")
library(CausalArima)
# library(grid)
# library(gridExtra)
# library(ggthemes)
# # library(ggplot2)
# library(tidybayes)
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = 100)
y <- 1.2 * x1 + rnorm(100)
y[71:100] <- y[71:100] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = 100)
# Adding a fictional intervention
int.date <- as.Date("2014-03-161")
horizon <- c(as.Date("2015-04-10"), as.Date("2015-04-20"))
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1 )
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
detach("package:CausalArima", unload = TRUE)
install.packages("C:/Users/eugen/OneDrive/Documenti/GitHub/CausalArima",
repos = NULL,
type = "source")
library(CausalArima)
# library(grid)
# library(gridExtra)
# library(ggthemes)
# # library(ggplot2)
# library(tidybayes)
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = 100)
y <- 1.2 * x1 + rnorm(100)
y[71:100] <- y[71:100] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = 100)
# Adding a fictional intervention
int.date <- as.Date("2014-03-161")
horizon <- c(as.Date("2015-04-10"), as.Date("2015-04-20"))
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1 )
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
detach("package:CausalArima", unload = TRUE)
install.packages("C:/Users/eugen/OneDrive/Documenti/GitHub/CausalArima",
repos = NULL,
type = "source")
library(CausalArima)
detach("package:CausalArima", unload = TRUE)
install.packages("C:/Users/eugen/OneDrive/Documenti/GitHub/CausalArima",
repos = NULL,
type = "source")
install.packages("C:/Users/eugen/OneDrive/Documenti/GitHub/CausalArima",
repos = NULL,
type = "source")
library(CausalArima)
## Example 1 (daily data, no predictors)
# Generating a time series of length 1000 and a vector of dates
y <- 0.5*seq(0.5, 250, by = 0.5) + rnorm(500, sd = 6)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = 500)
# Adding a fictional intervention
int.date <- as.Date("2015-04-01")
horizon <- c(as.Date("2015-04-10"), as.Date("2015-04-20"))
y.new <- y ; y.new[dates >= int.date] <- y.new[dates >= int.date]*1.25
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y.new, start = start, frequency = 1), auto = TRUE, ic = "aic", dates = dates, int.date = int.date)
forecast<-plot(ce, type="forecast", horizon = horizon, printing=T, fill_colour="slategray2",
colours=c("darkblue", "black")
)
impact<-plot(ce, type="impact", horizon = horizon,  alpha = 0.05, printing=T, color_line="green", color_intervals="red",
transparency=0.5)
residuals<-plot(ce, type="residuals",  printing=T, max_lag=30)
# grid.arrange(grobs=residuals)
forecast +theme_wsj()
# https://ggplot2.tidyverse.org/reference/theme.html
forecast+ theme(legend.text = element_text(size=10, colour = "red", family ="mono"),
legend.title = element_text(size=14, colour = "blue", family ="sans"),
title= element_text(size=20, colour = "green", family ="serif"),
axis.line=element_line(size=2, colour="yellow"),
legend.position = "bottom"
)
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
fore<-plot(ce, type="forecast")
install.packages("C:/Users/eugen/OneDrive/Documenti/GitHub/CausalArima",
repos = NULL,
type = "source")
library(CausalArima)
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = 100)
y <- 1.2 * x1 + rnorm(100)
y[71:100] <- y[71:100] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = 100)
# Adding a fictional intervention
int.date <- as.Date("2014-03-161")
horizon <- c(as.Date("2015-04-10"), as.Date("2015-04-20"))
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1 )
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
table(ce)
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
table(ce)
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
table(ce)
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aic", dates = dates, int.date = int.date,
xreg =x1 )
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
table(ce)
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "bic", dates = dates, int.date = int.date,
xreg =x1 )
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
table(ce)
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1 )
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
table(ce)
?auto.arima
floo(n/71)
floo(100/71)
floor(100/71)
floor(100*.71)
install.packages("C:/Users/eugen/OneDrive/Documenti/GitHub/CausalArima",
repos = NULL,
type = "source")
library(CausalArima)
# library(grid)
# library(gridExtra)
# library(ggthemes)
# # library(ggplot2)
# library(tidybayes)
# n<-1000
n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = 100)
# Adding a fictional intervention
int.date <- as.Date("2014-03-161")
horizon <- c(as.Date("2015-04-10"), as.Date("2015-04-20"))
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1)
fore<-plot(ce, type="forecast")
# library(grid)
# library(gridExtra)
# library(ggthemes)
# # library(ggplot2)
# library(tidybayes)
n<-1000
# n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = 100)
# Adding a fictional intervention
int.date <- as.Date("2014-03-161")
horizon <- c(as.Date("2015-04-10"), as.Date("2015-04-20"))
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1)
fore<-plot(ce, type="forecast")
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
# Adding a fictional intervention
int.date <- as.Date("2014-03-161")
horizon <- c(as.Date("2015-04-10"), as.Date("2015-04-20"))
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1)
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
table(ce)
# library(grid)
# library(gridExtra)
# library(ggthemes)
# # library(ggplot2)
# library(tidybayes)
n<-100
# n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
# Adding a fictional intervention
int.date <- as.Date("2014-03-161")
horizon <- c(as.Date("2015-04-10"), as.Date("2015-04-20"))
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1)
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
table(ce)
# library(grid)
# library(gridExtra)
# library(ggthemes)
# # library(ggplot2)
# library(tidybayes)
n<-10
# n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
# Adding a fictional intervention
int.date <- as.Date("2014-03-161")
horizon <- c(as.Date("2015-04-10"), as.Date("2015-04-20"))
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1)
# library(grid)
# library(gridExtra)
# library(ggthemes)
# # library(ggplot2)
# library(tidybayes)
n<-30
# n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
# Adding a fictional intervention
int.date <- as.Date("2014-03-161")
horizon <- c(as.Date("2015-04-10"), as.Date("2015-04-20"))
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1)
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
table(ce)
# library(grid)
# library(gridExtra)
# library(ggthemes)
# # library(ggplot2)
# library(tidybayes)
n<-50
# n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
# Adding a fictional intervention
int.date <- as.Date("2014-03-161")
horizon <- c(as.Date("2015-04-10"), as.Date("2015-04-20"))
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1)
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
table(ce)
# library(grid)
# library(gridExtra)
# library(ggthemes)
# # library(ggplot2)
# library(tidybayes)
n<-20000
# n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
# Adding a fictional intervention
int.date <- as.Date("2014-03-161")
horizon <- c(as.Date("2015-04-10"), as.Date("2015-04-20"))
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1)
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
table(ce)
fore
# library(grid)
# library(gridExtra)
# library(ggthemes)
# # library(ggplot2)
# library(tidybayes)
n<-200
# n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
# Adding a fictional intervention
int.date <- as.Date("2014-03-161")
horizon <- c(as.Date("2015-04-10"), as.Date("2015-04-20"))
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1)
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
table(ce)
# library(grid)
# library(gridExtra)
# library(ggthemes)
# # library(ggplot2)
# library(tidybayes)
n<-150
# n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
# Adding a fictional intervention
int.date <- as.Date("2014-03-161")
horizon <- c(as.Date("2015-04-10"), as.Date("2015-04-20"))
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1)
fore<-plot(ce, type="forecast")
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
table(ce)
impact<-plot(ce, type="impact")
residuals<-plot(ce, type="residuals")
table(ce)
fore<-plot(ce, type="forecast")
