library(CausalArima)
# simulate data
n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
# Adding a fictional intervention
int.date <- as.Date("2014-03-16")
# fit the model - Causal effect estimation
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc",
dates = dates, int.date = int.date)
impact(ce)
library(CausalArima)
# simulate data
n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
# Adding a fictional intervention
int.date <- as.Date("2014-03-16")
# fit the model - Causal effect estimation
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc",
dates = dates, int.date = int.date)
impact(ce)
impact(ce)
param
x$model$coef
x$model
x$model$coef
rm(list=ls())
library(CausalArima)
# simulate data
n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
# Adding a fictional intervention
int.date <- as.Date("2014-03-16")
# fit the model - Causal effect estimation
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc",
dates = dates, int.date = int.date)
impact(ce)
impact(ce)
library(CausalArima)
# simulate data
n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
# Adding a fictional intervention
int.date <- as.Date("2014-03-16")
# fit the model - Causal effect estimation
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc",
dates = dates, int.date = int.date)
impact(ce)
param
param
rows(param)
dim(param)
nrow(param)
library(CausalArima)
# simulate data
n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
# Adding a fictional intervention
int.date <- as.Date("2014-03-16")
# fit the model - Causal effect estimation
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc",
dates = dates, int.date = int.date)
impact(ce)
if(nrow(param)!=0){
colnames(param)<-c("coef", "se") # Controllare casi estremi in cui ci sono 0 parametri del modello
} else{param<-NULL}
param
library(CausalArima)
# simulate data
n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
# Adding a fictional intervention
int.date <- as.Date("2014-03-16")
# fit the model - Causal effect estimation
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc",
dates = dates, int.date = int.date)
impact(ce)
impact(ce)
rm(list=ls())
# library(grid)
# library(gridExtra)
# library(ggthemes)
# # library(ggplot2)
# library(tidybayes)
n<-100
# n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] +  10 # 10*sin(x1[floor(n*.71):n])
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
# Adding a fictional intervention
int.date <- dates[floor(n*.71)] # as.Date("2014-03-16")
horizon <- c(dates[floor(n*.8)], dates[floor(n*.9)])# c(as.Date("2015-04-10"), as.Date("2015-04-20"))
# Causal effect estimation
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc", dates = dates, int.date = int.date,
xreg =x1, nboot = 1000)
# fit the model - Causal effect estimation
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc",
dates = dates, int.date = int.date)
impact(ce)
rm(list=ls())
n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] + 10
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
start<-as.numeric(strftime(as.Date(dates[1], "%Y-%m-%d"), "%u"))
# Adding a fictional intervention
int.date <- as.Date("2014-03-16")
# fit the model - Causal effect estimation
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc",
dates = dates, int.date = int.date)
impact(ce)
# fit the model - Causal effect estimation
ce <- CausalArima(y = ts(y, start = start, frequency = 1), auto = TRUE, ic = "aicc",
dates = dates, int.date = int.date, xreg=x1)
impact(ce)
rm(list=ls())
library(CausalArima)
# library(grid)
# library(gridExtra)
# library(ggthemes)
# # library(ggplot2)
# library(tidybayes)
n<-100
# n<-100
set.seed(1)
x1 <- 100 + arima.sim(model = list(ar = 0.999), n = n)
y <- 1.2 * x1 + rnorm(n)
y[ floor(n*.71):n] <- y[ floor(n*.71):n] +  10 # 10*sin(x1[floor(n*.71):n])
data <- cbind(y, x1)
dates <- seq.Date(from = as.Date("2014-01-05"), by = "days", length.out = n)
library(CausalArima)
# data(sales)
sales <- read.csv("C:/Users/eugen/OneDrive/Desktop/gente/fiammetta/dataset.csv")
start<-as.numeric(strftime(as.Date(min(sales$Dates), "%Y-%m-%d"), "%u"))
int.date<-as.Date("2018-11-10")
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = TRUE, ic = "aicc",
dates = as.Date(sales$Dates), xreg=sales$Price, int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
summary_model$impact_norm
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = TRUE, ic = "aicc",
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
summary_model$impact_norm
summary_model$impact_boot
summary_model<-impact(ce, boot=1000)
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = TRUE, ic = "aicc",
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = TRUE, ic = "aicc",
dates = as.Date(sales$Dates), xreg=sales$Price, int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
summary_model$impact_norm
ce$model
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = TRUE, ic = "aicc",
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
ce$model
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = TRUE, ic = "bic",
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
ce$model
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = F, order=c(1,0,0), seasonal = c(1,0,0),
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
summary_model$impact_norm
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = F, order=c(1,0,0), seasonal = c(1,0,0),
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
summary_model$impact_norm
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = TRUE, ic = "aicc",
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
ce$model
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = F, order=c(1,0,0), seasonal = c(1,0,2),
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = F, order=c(1,0,0), seasonal = c(1,0,1),
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = TRUE, ic = "aicc",
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
ce$model
arimaorder(ce$model)
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = F,
order=c(2,0,2), seasonal = c(2,0,0),
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = F,
order=c(2,0,2), seasonal = c(2,1,0),
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = F,
order=c(2,0,2), seasonal = c(2,1,0),
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = F,
order=c(2,0,2), seasonal = c(2,1,0),
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = TRUE, ic = "aicc",
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
arimaorder(ce$model)
ce$model
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = F,
order=c(2,0,2), seasonal = c(2,1,0),
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
auto.arima
?auto.arima
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = F,
order=c(2,0,2), seasonal = c(2,1,0), arima.args = list(include.drift=T)
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = F,
order=c(2,0,2), seasonal = c(2,1,0), arima.args = list(include.drift=T),
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = F,
order=c(2,0,2), seasonal = c(2,1,0), arima.args = list(include.drift=F),
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
cane<-auto.arima(sales$Sales)
simulate(cane)
simulate(cane, future = T)
simulate(cane, future = T, bootstrap = T)
cane<-auto.arima(sales$Sales, ic = "aicc")
simulate(cane, future = T, bootstrap = T)
library(CausalArima)
data(sales)
int.date<-as.Date("2018-11-10")
int.date<-as.Date("2018-10-04")
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = F,
order=c(2,0,2), seasonal = c(2,1,0), arima.args = list(include.drift=F),
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
summary_model$impact_norm
ce$model
ce <- CausalArima(y = ts(sales$Sales, start = start, frequency = 7), auto = F,
order=c(2,0,2), seasonal = c(2,1,0), arima.args = list(include.drift=F),
dates = as.Date(sales$Dates), int.date = int.date, nboot = 1000)
summary_model<-impact(ce, boot=1000)
summary_model$impact_norm
